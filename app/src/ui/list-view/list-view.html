<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../styles/shared.html">
<link rel="import" href="../icon/icon.html">
<link rel="import" href="../record-item/record-item.html">

<dom-module id="pl-list-view">
    <template>

        <style include="shared">
            :host {
                --gutter-width: 2px;
                @apply --fullbleed;
                overflow-x: hidden;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
                height: 100%;
            }

            header > div {
                flex: 1;
            }

            header input {
                width: 100%;
                padding-left: 15px;
            }

            header input:not(:focus) ~ pl-icon[icon="cancel"] {
                display: none;
            }

            header input:focus ~ pl-icon:not([icon="cancel"]) {
                display: none;
            }

            main {
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            iron-list {
                flex: 1;
            }
        </style>

        <header>
            <div class="tap">
                <input class="tiles-1" placeholder="Type to search..." value="{{ _filterString::input }}"></input>
            </div>
            <pl-icon icon="add" class="tiles-2 tap" on-click="_newRecord" hidden$="{{ _filterActive(_filterString) }}"></pl-icon>
            <pl-icon icon="cloud" class="tiles-3 tap" on-click="_newRecord" hidden$="{{ _filterActive(_filterString) }}"></pl-icon>
            <pl-icon icon="lock" class="tiles-4 tap" on-click="_openMenu" hidden$="{{ _filterActive(_filterString) }}"></pl-icon>
            <pl-icon icon="settings" class="tiles-5 tap" on-click="_newRecord" hidden$="{{ _filterActive(_filterString) }}"></pl-icon>
            <pl-icon icon="cancel" class="tiles-2 tap" on-click="_clearFilter" hidden$="{{ !_filterActive(_filterString) }}"></pl-icon>
        </header>

        <main>

            <iron-list items="[[ _filterAndSort(records, _filterString) ]]">
                <template>
                    <pl-record-item record="[[ item ]]" on-click="_recordTapped" class$="[[ _itemClass(index) ]]"></pl-record-item>
                </template>
            </iron-list>

        </main>

    </template>

    <script src="list-view.js"></script>

</dom-module>
